language: c
os: linux
sudo: false
env: PYTHON_VERSION=3.7 SETUP_XVFB=True PIP_DEPENDENCIES="tox-conda tox-travis" CONDA_CHANNEL_PRIORITY=True CONDA_CHANNELS="conda-forge"
cache:
- pip
- yarn
services: xvfb
install:
- nvm i 11
- git clone --depth 1 git://github.com/astropy/ci-helpers.git && source ci-helpers/travis/setup_conda.sh
- yarn
script:
- tox
- yarn docs:build
deploy:
  provider: pages
  skip-cleanup: true
  local_dir: docs/.vuepress/dist
  github-token: $GITHUB_TOKEN
  keep-history: true
  on:
    branch: master
