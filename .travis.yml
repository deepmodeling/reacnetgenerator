language: node_js
os: linux
node_js: 12
cache:
  yarn: true
  directories:
  - $HOME/.cache/pip
services: xvfb
env: PYTHON_VERSION=3.7 SETUP_XVFB=True CONDA_DEPENDENCIES="tox-conda" CONDA_CHANNEL_PRIORITY=True CONDA_CHANNELS="conda-forge"
install:
- git clone --depth 1 git://github.com/astropy/ci-helpers.git && source ci-helpers/travis/setup_conda.sh
- yarn
script:
- tox -e py37 && cp testfiles-*/dump.reaxc.html docs/.vuepress/public/report.html
- yarn docs:build
deploy:
  provider: pages
  skip-cleanup: true
  local_dir: docs/.vuepress/dist
  github-token: $GITHUB_TOKEN
  keep-history: true
  on:
    branch: master
